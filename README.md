# Advanced algorithms HSE course.

# Problem_1. Доска с монетами.
Вам дали размеченную доску, содержащую N × M клеток — N по строкам и M по столбцам. На каждой клетке этой доски либо орлом, либо решкой вверх лежит монета. За одно действие можно взять две любые соседние по горизонтали или вертикали монеты и перевернуть их. В задаче требуется определить, за какое минимальное число действий можно так перевернуть монеты, что в результате орлы и решки будут лежать в шахматном порядке (т.е. чередоваться — таких порядков ровно 2), либо же сообщить, что это невозможно.
## Формат ввода.
В первой строке записаны 2 целых числа через пробел — N и M (1 ≤ N ⋅ M ≤ 20) — размеры доски. Далее следуют N строк, каждая из которых содержит по M символов — описание доски. Если очередной символ равен '0', то на этой клетке монета лежит вверх орлом, а если '1' — то решкой.
## Формат вывода.
Выведите ответ на задачу, либо же число -1, если решения нет.

#
#
# Problem_2. Максимальный размер компании.
Вам нужно создать компанию. Имеется всего n кандидатов в сотрудники в вашей компании, и вы должны выбрать как можно большее количество сотрудников. Однако есть несколько ограничений. Во-первых, структура компании должна быть строго иерархическая: у компании должен быть единственный директор, у него есть несколько (возможно 0) непосредственных подчиненных, у каждого из них есть несколько (возможно 0) своих непосредственных подчиненных и т.д.

Сотрудник A называется начальником сотрудника B, если B является непосредственным подчиненным A или непосредственным подчиненным непосредственного подчиненного A и т.д. Иными словами, если B — непосредственный подчиненный A, то A является начальником B, а также начальником любого сотрудника C, начальником которого является B. 

Не каждая пара (A, B), где A — начальник B, может мирно сосуществовать в компании. Если 
B считает A умственно отсталым, и при этом A — начальник B, то это создает некоторую напряженность отношений в компании, которой вы хотели бы избежать. 

Некоторые из n данных людей знакомы друг с другом, периодически встречаются и играют друг с другом в дурака. Если A хотя бы раз выигрывал у B в дурака, то A считает B умственно отсталым, а также A считает умственно отсталым любого человека C, которого таковым считает B. Т.е. если, например, A выигрывал у B, B — у C, C — у D, D — у E, то A считает умственно отсталыми B , C , D, E ; B — C, D, E ; C — D, E ; D — E.
Вам необходимо выяснить, какое наибольшее число сотрудников можно набрать в компанию.
## Формат ввода.
В первой строке входа заданы два целых числа n и m — количество людей и количество сыгранных партий в дурака. В каждой из следующих m строк — три целых числа, первое из которых — номер первого из людей, участвовавших в партии (от 1 до n), второе — номер второго из людей (от 1 до n), третье — результат партии (1 — первый выиграл, 2 — второй выиграл, 3 — ничья). 1 ≤ n, m ≤ 50000.
## Формат вывода.
Выведите максимальное количество сотрудников, которых можно нанять на работу в компанию.
#
#
# Problem_3. Секретные агенты.
Несколько секретных агентов ловят преступника и патрулируют местность, в которой он предположительно находится. Чтобы общаться между собой, они используют рации, передающие сигнал на ограниченное расстояние. Все рации одинаковые, и у них есть максимальное расстояние, на которое можно передать сигнал — R. Агенты весьма ленивы, поэтому они стоят на своих точках и не двигаются.

Как только один из агентов заметит преступника, он должен тут же передать эту новость вместе с координатами преступника всем остальным агентам. Для этого он может передать новость некоторым из тех агентов, до которых добивает его рация, те — расскажут своим соседям и т.д., но ни один агент при этом не должен сойти с места. Необходимо выяснить, какое минимальное значение R устраивает агентов, если задано их изначальное положение.
## Формат ввода.
В первой строке входа задано число 1 <= n <= 1000 — количество агентов. В каждой из следующих n строк — по два целых числа x и y — координаты соответствующего агента (-109 <= x, y, <= 109).
## Формат вывода.
В единственную строку выхода необходимо вывести одно вещественное число с десятью знаками после десятичной точки — минимальное возможное значение R. Ваш ответ должен отличаться от правильного не более, чем на 10^(-4). Мы предлагаем вам вывести десять знаков после десятичной точки, чтобы избежать ошибок округления.
#
# Problem_4. Почтовый робот.
В стране X случилась беда. Сломался почтовый робот, который занимался доставкой почты в самые разные уголки X. Страну X можно представить как поле размера N × M, каждая клетка которого либо проходима, либо нет. Раньше, когда роботу нужно было добраться из пункта A в пункт B, он вычислял кратчайший путь по свободным клеткам и добирался до пункта назначения, либо (если получатель жил где-нибудь в болотах) сообщал, что доставить почту невозможно.

Из текущей клетки робот может переместиться только в соседние с ней по стороне. При этом роботу также нужно совершать повороты, т.е. если, например, робот шел вправо, а ему нужно переместиться вверх, он сначала совершает поворот налево. Аналогично, он может поворачиваться направо. Разработчики робота также предусмотрели поворот в противоположную текущему направлению сторону, т.е. вокруг себя. Но повороты не учитывались при вычислении кратчайшего пути, поскольку роботу легко их выполнять.

В результате сбоя робот после совершения поворота налево не может далее поворачиваться налево до тех пор, пока не сделает поворот направо, и наоборот. Повороты вокруг себя совершаются независимо и не влияют на это правило, однако робот не может совершать более одного поворота, находясь в одной клетке. Вам поручили написать модифицированную программу для робота, чтобы он мог вычислять кратчайшие пути с этим сбоем.
## Формат ввода.
В первой строке входного файла записано 2 целых числа через пробел — N и M (1 ≤ N, M ≤ 1000). Далее следует описание поля — N строк по M символов в каждой. Символ '.' означает, что эта клетка свободна, а '#' — что через нее пройти нельзя. В следующей строке записано 2 целых числа через пробел — r1 и c1 (1 ≤ r1 ≤ n и 1 ≤ c1 ≤ m) — начальная позиция робота (сначала номер строки, а потом номер столбца). Наконец, в последней строке записаны координаты пункта назначения в том же формате.

Изначально до совершения первого шага робота можно повернуть в любую сторону. Гарантируется, что начальная и конечная клетки свободны.
## Формат вывода.
Если искомого пути не существует, выведите число -1. В противном случае выведите в первой строке число K — количество шагов в кратчайшем пути. Далее должно следовать K + 1 строка, описывающие маршрут робота (клетки, по которым ему нужно пройти). При этом первая клетка в маршруте должна совпадать со стартовой позицией, а последняя — c конечной.
#
# Problem_5. 
Вам дан набор из n треугольников (1 ≤ n ≤ 1 000 000). Каждый треугольник задается тремя целыми числами — длинами его сторон. Длины сторон — положительные целые числа, не превосходящие 109. Некоторые пары треугольников подобны. В силу свойств подобия известно, что все эти треугольники распадаются на несколько классов, в каждом из которых все треугольники подобны друг другу. К примеру, три треугольника со сторнами (6, 6, 10), (15, 25, 15), (35, 21, 21) все попарно подобны друг другу, то есть образуют один класс. Необходимо найти количество классов подобия, на которые распадаются данные n треугольников.

Сложность алгоритма должна в среднем линейно зависеть от n (может еще зависеть от ограничений на стороны треугольника). Т.е. никаких сортировок длинных массивов в решении делать нельзя.
## Формат ввода.
В первой строке входа дано число n. В каждой из следующих n строк — по три целых числа, задающих стороны очередного треугольника.
## Формат вывода.
Выведите число классов подобия.
#
# Problem_6. 
N детей играют в считалочку.

Перед началом игры дети выстраиваются в круг. И, начиная с некоторого ребенка, последовательно нумеруются по часовой стрелке от 1 до N.

Игра длится N раундов. В каждом раунде очередной ребенок выбывает из круга, а оставшиеся продолжают стоять. В первом раунде выбывает ребенок с номером K. В каждом из следующих раундов выбывает K-й ребенок по часовой стрелке от выбывшего на предыдущем раунде.

Ваша задача — определить очередность выбывания детей из круга.
## Формат ввода.
Единственная строка содержит целые числа N (1 ≤ N ≤ 105) и K (1 ≤ K ≤ N).
## Формат вывода.
Вывести через пробел номера детей в порядке их выбывания из круга.
#
# Problem_7. 
В маленькой корпорации изначально царила демократия: каждый работник был сам себе начальник, никто за его работой не следил и никто, кроме него самого, за нее не отвечал. Таких людей мы будем называть директорами.

Однако через некоторое время корпорация стала очень большой, и стало ясно, что так дальше продолжаться не может. Поэтому постепенно стали назначать одних сотрудников начальниками над другими. А именно, в некоторые моменты времени по очереди стали объявлять, что теперь сотрудник с идентификационным номером a является непосредственным начальником сотрудника с номером b. Причем если сотруднику уже однажды назначили непосредственного начальника, то этот начальник уже никогда не изменится.

Через некоторое время система отношений в корпорации стала сложной, и сотрудникам иногда становится интересно: кто же их чей директор. Иными словами рассмотрим сотрудника a, а затем его непосредственного начальника, а затем взять его непосредственного начальника и т.д. Гарантируется, что данный процесс когда-нибудь остановится на сотруднике b, который является директором, т.е. сам себе начальник. (Иначе говоря, в графе подчиненности нет циклов кроме петель.) Данного сотрудника b и будем называть директором для a.
## Формат ввода.
В первой строке входа записаны числа n и m — количество сотрудников и количество запросов соответственно. Сотрудники пронумерованы числами от 1 до n. Запросы бывают двух типов: сделать сотрудника a непосредственным начальником сотрудника b или же спросить, кто является директором сотрудника a.

В каждой из следующих m строк — по одному запросу. Запрос первого типа задается двумя целыми числами 1 ≤ a, b ≤ n. Запрос второго типа задается одним числом 1 ≤ a ≤ n. При этом 1 ≤ m, n ≤ 100  000.
## Формат вывода.
Выведите ровно m чисел — по одному на запрос. Каждое число — в отдельной строке. Если запрос был сделать одного человека начальником другого, то нужно выдать 0 или 1: если запрос был корректным, т.е. подчиненному до этого не назначали еще начальников, и не образуется циклов в графе подчиненности (в том числе петель), то выдать 1, иначе выдать 0. В случае если запрос был корректен, необходимо выполнить назначение, иначе нужно его проигнорировать. Если запрос был узнать директора сотрудника с номером a, то нужно выдать номер того самого директора.
